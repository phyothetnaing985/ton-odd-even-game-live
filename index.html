<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golden Game - TON Blockchain</title>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --container-bg: #f9f9f9;
            --accent-color: #0088cc;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --text-color: #f0f0f0;
            --container-bg: #2d2d2d;
            --accent-color: #00aaff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 500px;
        }

        .container {
            background-color: var(--container-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            margin-top: 20px;
            text-align: center;
        }

        #theme-toggle {
            background: none;
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            padding: 5px 10px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
        }

        .input-group { margin: 20px 0; text-align: left; }
        input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; }
        
        .btn-play {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            width: 100%;
        }

        .status { margin-top: 15px; font-size: 0.9rem; color: #666; }
    </style>
</head>
<body>

    <div class="header">
        <h2>üèÜ Golden Game</h2>
        <button id="theme-toggle">üåô Night Mode</button>
    </div>

    <div id="ton-connect"></div>

    <div class="container">
        <div class="input-group">
            <label>·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÄ·Äº·Ä±·Ä∏ (TON):</label>
            <input type="number" id="betAmount" placeholder="·Ä•·Äï·Äô·Ä¨ - 0.5" step="0.1">
        </div>

        <div class="input-group">
            <label>·Äò·ÄÄ·Ä∫·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·Äï·Ä´:</label>
            <select id="betSide" style="width: 100%; padding: 10px; border-radius: 8px;">
                <option value="true">·ÄÖ·ÄØ·Ä∂ (Even)</option>
                <option value="false">·Äô (Odd)</option>
            </select>
        </div>

        <button class="btn-play" onclick="playGame()">·Ä°·ÄÅ·ÄØ·Äï·Ä≤ ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·ÄÄ·ÄÖ·Ä¨·Ä∏·Äô·Ää·Ä∫</button>
        <p class="status" id="statusText">Wallet ·ÄÅ·Äª·Ä≠·Äê·Ä∫·ÄÜ·ÄÄ·Ä∫·Äõ·Äî·Ä∫ ·Äú·Ä≠·ÄØ·Ä°·Äï·Ä∫·Äï·Ä´·Äû·Ää·Ä∫</p>
    </div>

    <script>
        // Theme Toggle Logic
        const themeToggle = document.getElementById('theme-toggle');
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            if (currentTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'light');
                themeToggle.innerText = 'üåô Night Mode';
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.innerText = '‚òÄÔ∏è Day Mode';
            }
        });

        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://raw.githubusercontent.com/ton-connect/demo-dapp-with-react/master/public/tonconnect-manifest.json',
            buttonRootId: 'ton-connect'
        });

        async function playGame() {
            const amount = document.getElementById('betAmount').value;
            const side = document.getElementById('betSide').value === "true";
            const statusText = document.getElementById('statusText');

            if (!tonConnectUI.connected) {
                alert("·ÄÄ·Äª·Ä±·Ä∏·Äá·Ä∞·Ä∏·Äï·Äº·ÄØ·Åç Wallet ·Ä°·Äõ·ÄÑ·Ä∫·ÄÅ·Äª·Ä≠·Äê·Ä∫·Äï·Ä´");
                return;
            }

            if (!amount || amount < 0.1) {
                alert("·Ä°·Äî·Ää·Ä∫·Ä∏·ÄÜ·ÄØ·Ä∂·Ä∏ 0.1 TON ·Äú·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äõ·Äï·Ä´·Äô·Ää·Ä∫");
                return;
            }

            statusText.innerText = "Transaction ·Äï·Ä≠·ÄØ·Ä∑·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫...";

            try {
                // Bet Message Structure for Tact GameMaster
                const transaction = {
                    validUntil: Math.floor(Date.now() / 1000) + 60,
                    messages: [
                        {
                            address: "EQCVwJNztxr7Ia1TuTxwsz8Iqe6DbDpdxcpjPoCcCnRKHotR", // ·Äô·Ä≠·Äê·Ä∫·ÄÜ·ÄΩ·Ä±·Äõ·Ä≤·Ä∑ Contract
                            amount: (parseFloat(amount) * 1000000000).toString(),
                            payload: "te6ccgEBAQEAKgAAWv8AAQAAbS4uYmX7v/v/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACByS8I" // ·Ä°·Äô·Äê·Ä∫·ÄÄ·Äº·ÄÆ·Ä∏ ·ÄÖ·ÄÖ·Ä∫·ÄÜ·Ä±·Ä∏·Äë·Ä¨·Ä∏·Äû·Ä±·Ä¨ Bet Payload
                        }
                    ]
                };

                await tonConnectUI.sendTransaction(transaction);
                statusText.innerText = "·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫! ·Äõ·Äú·Äí·Ä∫·ÄÄ·Ä≠·ÄØ Wallet History ·Äê·ÄΩ·ÄÑ·Ä∫ ·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äï·Ä´";
            } catch (e) {
                statusText.innerText = "·Ä°·Äô·Äæ·Ä¨·Ä∏·Äê·ÄÖ·Ä∫·ÄÅ·ÄØ ·Äñ·Äº·ÄÖ·Ä∫·Äï·ÄΩ·Ä¨·Ä∏·ÄÅ·Ä≤·Ä∑·Äï·Ä´·Äû·Ää·Ä∫";
                console.error(e);
            }
        }
    </script>
</body>
</html>
